# API Integration Guide

## –û–±–∑–æ—Ä

Backend –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ FastAPI —Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π —Ç—Ä–µ—Ö AI —Å–µ—Ä–≤–∏—Å–æ–≤:
- **ChatGPT (OpenAI)** - –¥–ª—è –æ–±—â–µ–Ω–∏—è —Å GPT –º–æ–¥–µ–ª—è–º–∏
- **Claude (Anthropic)** - –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–∞ —á–µ—Ä–µ–∑ Claude API
- **KazLLM** - –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–∞ –Ω–∞ –∫–∞–∑–∞—Ö—Å–∫–∏–π —è–∑—ã–∫

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å API –∫–ª—é—á–µ–π

### –í–∞–∂–Ω–æ! üîê

API –∫–ª—é—á–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ —Ñ–∞–π–ª–µ `.env`, –∫–æ—Ç–æ—Ä—ã–π **–ù–ï –¥–æ–ª–∂–µ–Ω** –±—ã—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω –≤ Git.

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

1. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ `.env.example` –≤ `.env`:
   ```bash
   copy .env.example .env
   ```

2. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ `.env` —Å–≤–æ–∏–º–∏ –∫–ª—é—á–∞–º–∏:
   ```env
   OPENAI_API_KEY=–≤–∞—à_openai_–∫–ª—é—á
   CLAUDE_API_KEY=–≤–∞—à_claude_–∫–ª—é—á
   TRANSLATION_API_KEY=–≤–∞—à_translation_–∫–ª—é—á
   ```

3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `.env` –≤ `.gitignore` (—É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ)

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
cd backend
pip install -r requirements.txt
```

## –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞

```bash
python main.py
```

–°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –Ω–∞ `http://127.0.0.1:8080`

## API Endpoints

### 1. ChatGPT API

**Endpoint:** `POST /api/chatgpt`

**–û–ø–∏—Å–∞–Ω–∏–µ:** –û–±—â–µ–Ω–∏–µ —Å ChatGPT

**Request Body:**
```json
{
  "message": "–û–±—ä—è—Å–Ω–∏ —á—Ç–æ —Ç–∞–∫–æ–µ –º–∞—à–∏–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ",
  "system_prompt": "–¢—ã –ø–æ–ª–µ–∑–Ω—ã–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç",
  "model": "gpt-4",
  "temperature": 0.7,
  "max_tokens": 1000
}
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `message` (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ) - —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–ª—è ChatGPT
- `system_prompt` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) - —Å–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é "You are a helpful assistant."
- `model` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) - –º–æ–¥–µ–ª—å GPT, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é "gpt-4"
  - –î–æ—Å—Ç—É–ø–Ω—ã: "gpt-4", "gpt-4-turbo", "gpt-3.5-turbo"
- `temperature` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) - –∫—Ä–µ–∞—Ç–∏–≤–Ω–æ—Å—Ç—å –æ—Ç–≤–µ—Ç–∞ (0.0-2.0), –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 0.7
- `max_tokens` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) - –º–∞–∫—Å–∏–º—É–º —Ç–æ–∫–µ–Ω–æ–≤ –≤ –æ—Ç–≤–µ—Ç–µ, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 1000

**Response:**
```json
{
  "success": true,
  "message": "–ú–∞—à–∏–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ - —ç—Ç–æ...",
  "model": "gpt-4",
  "usage": {
    "prompt_tokens": 25,
    "completion_tokens": 150,
    "total_tokens": 175
  }
}
```

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è (JavaScript):**
```javascript
const response = await fetch('http://127.0.0.1:8080/api/chatgpt', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
  },
  body: JSON.stringify({
    message: '–ü—Ä–∏–≤–µ—Ç! –ö–∞–∫ –¥–µ–ª–∞?',
    model: 'gpt-4',
    temperature: 0.7
  })
});

const data = await response.json();
console.log(data.message);
```

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è (Python):**
```python
import requests

response = requests.post('http://127.0.0.1:8080/api/chatgpt', json={
    'message': '–ü—Ä–∏–≤–µ—Ç! –ö–∞–∫ –¥–µ–ª–∞?',
    'model': 'gpt-4',
    'temperature': 0.7
})

data = response.json()
print(data['message'])
```

### 2. Claude API

**Endpoint:** `POST /api/claude`

**–û–ø–∏—Å–∞–Ω–∏–µ:** –û–±—â–µ–Ω–∏–µ —Å Claude 4.5 Sonnet

**Request Body:**
```json
{
  "message": "–û–±—ä—è—Å–Ω–∏ —á—Ç–æ —Ç–∞–∫–æ–µ –Ω–µ–π—Ä–æ–Ω–Ω—ã–µ —Å–µ—Ç–∏",
  "system_prompt": "–¢—ã –ø–æ–ª–µ–∑–Ω—ã–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç",
  "model": "claude-sonnet-4-5-20250929",
  "temperature": 0.7,
  "max_tokens": 4096
}
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `message` (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ) - —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–ª—è Claude
- `system_prompt` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) - —Å–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é "You are a helpful assistant."
- `model` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) - –º–æ–¥–µ–ª—å Claude, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é "claude-sonnet-4-5-20250929" (–º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∞–ª–∏–∞—Å "claude-sonnet-4-5")
- `temperature` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) - –∫—Ä–µ–∞—Ç–∏–≤–Ω–æ—Å—Ç—å –æ—Ç–≤–µ—Ç–∞ (0.0-1.0), –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 0.7
- `max_tokens` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) - –º–∞–∫—Å–∏–º—É–º —Ç–æ–∫–µ–Ω–æ–≤ –≤ –æ—Ç–≤–µ—Ç–µ, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 4096

**Response:**
```json
{
  "success": true,
  "message": "–ù–µ–π—Ä–æ–Ω–Ω—ã–µ —Å–µ—Ç–∏ - —ç—Ç–æ...",
  "model": "claude-sonnet-4-5-20250929",
  "usage": {
    "input_tokens": 25,
    "output_tokens": 150
  }
}
```

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è (JavaScript):**
```javascript
const response = await fetch('http://127.0.0.1:8080/api/claude', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
  },
  body: JSON.stringify({
    message: '–ü—Ä–∏–≤–µ—Ç! –†–∞—Å—Å–∫–∞–∂–∏ –æ –º–∞—à–∏–Ω–Ω–æ–º –æ–±—É—á–µ–Ω–∏–∏',
    model: 'claude-sonnet-4-5-20250929',  // –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∞–ª–∏–∞—Å 'claude-sonnet-4-5'
    temperature: 0.7
  })
});

const data = await response.json();
console.log(data.message);
```

### 3. –ü–µ—Ä–µ–≤–æ–¥ —Ç–µ–∫—Å—Ç–∞

**Endpoint:** `POST /api/translate`

**–û–ø–∏—Å–∞–Ω–∏–µ:** –ü–µ—Ä–µ–≤–æ–¥ —Ç–µ–∫—Å—Ç–∞ —á–µ—Ä–µ–∑ ChatGPT, Claude –∏–ª–∏ KazLLM

**Request Body:**
```json
{
  "text": "Hello world",
  "source_language": "eng",
  "target_language": "kaz",
  "model": "kazllm"
}
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `text` (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ) - —Ç–µ–∫—Å—Ç –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–∞
- `source_language` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) - —è–∑—ã–∫ –∏—Å—Ç–æ—á–Ω–∏–∫–∞, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é "eng"
  - –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ: "eng" (English), "kaz" (Kazakh), "rus" (Russian)
- `target_language` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) - —Ü–µ–ª–µ–≤–æ–π —è–∑—ã–∫, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é "kaz"
- `model` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) - –º–æ–¥–µ–ª—å –ø–µ—Ä–µ–≤–æ–¥–∞: "kazllm", "claude" –∏–ª–∏ "chatgpt", –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é "kazllm"
  - **chatgpt** - OpenAI GPT-4 (–≤—ã—Å–æ–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ, —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —è–∑—ã–∫–æ–≤)
  - **claude** - Anthropic Claude 4.5 Sonnet (–≤—ã—Å–æ—á–∞–π—à–µ–µ –∫–∞—á–µ—Å—Ç–≤–æ)
  - **kazllm** - —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –º–æ–¥–µ–ª—å –¥–ª—è –∫–∞–∑–∞—Ö—Å–∫–æ–≥–æ —è–∑—ã–∫–∞

**Response:**
```json
{
  "success": true,
  "text": "–°”ô–ª–µ–º ”ô–ª–µ–º",
  "source_language": "eng",
  "target_language": "kaz",
  "model": "kazllm"
}
```

### 4. –ó–∞–≥—Ä—É–∑–∫–∞ DOCX —Ñ–∞–π–ª–∞

**Endpoint:** `POST /api/upload`

**–û–ø–∏—Å–∞–Ω–∏–µ:** –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è DOCX –≤ HTML —Å —Ä–∞–∑–±–∏–µ–Ω–∏–µ–º –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã

**Request:** Multipart form-data —Å —Ñ–∞–π–ª–æ–º

**Response:**
```json
{
  "success": true,
  "filename": "document.docx",
  "pages": ["<html>...</html>", "..."],
  "total_pages": 5
}
```

## –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

–í—Å–µ endpoints –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç HTTP —Å—Ç–∞—Ç—É—Å –∫–æ–¥—ã:
- `200` - —É—Å–ø–µ—Ö
- `400` - –Ω–µ–≤–µ—Ä–Ω—ã–π –∑–∞–ø—Ä–æ—Å
- `500` - –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞
- `503` - —Å–µ—Ä–≤–∏—Å –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
- `504` - —Ç–∞–π–º–∞—É—Ç

–§–æ—Ä–º–∞—Ç –æ—à–∏–±–∫–∏:
```json
{
  "detail": "–û–ø–∏—Å–∞–Ω–∏–µ –æ—à–∏–±–∫–∏"
}
```

## Best Practices

1. **–ù–∏–∫–æ–≥–¥–∞ –Ω–µ –∫–æ–º–º–∏—Ç—å—Ç–µ `.env`** - –≤–∞—à–∏ API –∫–ª—é—á–∏ –æ—Å—Ç–∞–Ω—É—Ç—Å—è –≤ –∏—Å—Ç–æ—Ä–∏–∏ Git!
2. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `.env.example`** - –¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
3. **–ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –∫–ª—é—á–∏** - API –≤–µ—Ä–Ω–µ—Ç 500 –æ—à–∏–±–∫—É –µ—Å–ª–∏ –∫–ª—é—á –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω
4. **–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–π—Ç–µ –æ—à–∏–±–∫–∏** - –≤—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ `success` –≤ –æ—Ç–≤–µ—Ç–µ
5. **–†–æ—Ç–∞—Ü–∏—è –∫–ª—é—á–µ–π** - –º–µ–Ω—è–π—Ç–µ –∫–ª—é—á–∏ —Ä–µ–≥—É–ª—è—Ä–Ω–æ –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

ChatGPT endpoint –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ —Ç–æ–∫–µ–Ω–æ–≤:
```json
{
  "usage": {
    "prompt_tokens": 25,
    "completion_tokens": 150,
    "total_tokens": 175
  }
}
```

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç—Ç–æ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∑–∞—Ç—Ä–∞—Ç –Ω–∞ API.

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:
1. –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –ª–∏ –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏: `pip install -r requirements.txt`
2. –ù–∞—Å—Ç—Ä–æ–µ–Ω –ª–∏ `.env` —Ñ–∞–π–ª —Å –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º–∏ –∫–ª—é—á–∞–º–∏
3. –ó–∞–ø—É—â–µ–Ω –ª–∏ —Å–µ—Ä–≤–µ—Ä –Ω–∞ –ø–æ—Ä—Ç—É 8080
4. –ü—Ä–∞–≤–∏–ª—å–Ω–æ –ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã CORS origins –¥–ª—è –≤–∞—à–µ–≥–æ frontend
